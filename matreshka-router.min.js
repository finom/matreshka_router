!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e(require("matreshka/calc"),require("matreshka/on"),require("matreshka/ondebounce"),require("matreshka/set"),require("matreshka/trigger"));else if("function"==typeof define&&define.amd)define(["matreshka/calc","matreshka/on","matreshka/ondebounce","matreshka/set","matreshka/trigger"],e);else{var r="object"==typeof exports?e(require("matreshka/calc"),require("matreshka/on"),require("matreshka/ondebounce"),require("matreshka/set"),require("matreshka/trigger")):e(t.Matreshka.calc,t.Matreshka.on,t.Matreshka.onDebounce,t.Matreshka.set,t.Matreshka.trigger);for(var n in r)("object"==typeof exports?exports:t)[n]=r[n]}}(this,function(t,e,r,n,a){return function(t){function e(n){if(r[n])return r[n].exports;var a=r[n]={i:n,l:!1,exports:{}};return t[n].call(a.exports,a,a.exports,e),a.l=!0,a.exports}var r={};return e.m=t,e.c=r,e.i=function(t){return t},e.d=function(t,r,n){e.o(t,r)||Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=1)}([function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t){(0,g.default)(t,"hashPath",window.location.hash,{hashEvent:!0})}function o(t){(0,g.default)(t,"path",window.location.pathname,{popEvent:!0})}var s=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),u=r(2),h=n(u),f=r(3),c=n(f),l=r(4),p=n(l),d=r(6),k=n(d),v=r(5),g=n(v),m=function(){function t(e){return a(this,t),this.parts=[],this.path="/",this.hashPath="!#/",e in t?t[e]:(this.type=e,this)}return s(t,[{key:"init",value:function(){var t=this;if(this.initialized)return this;var e=this.type;if((0,h.default)(this,{parts:{source:"path",handler:function(t){var e=t.replace(/\/\//g,"/").replace(/^\/|\/$/g,"");return e?e.split("/"):[]}},path:{source:"parts",handler:function(t){for(var e=[],r=0;r<t.length&&t[r];r++)e.push(t[r]);return e.length?"/"+e.join("/")+"/":"/"}}},{debounceCalc:!1}),(0,h.default)(this,{hashPath:{source:"path",handler:function(t){return t&&"/"!==t?"#!"+t:""}},path:{source:"hashPath",handler:function(t){return t?t.replace(/^#!/,""):""}}},{debounceCalc:!1}),(0,c.default)(this,"change:parts",function(e){var r=e.value,n=e.previousValue,a=r.length===n.length;if(a)for(var i=0;i<r.length;i++)if(r[i]!==n[i]){a=!1;break}a||(0,k.default)(t,"pathchange")}),"undefined"!=typeof window){var r=window,n=r.history,a=r.location;"hash"===e?(i(this),window.addEventListener("hashchange",function(){return i(t)}),(0,p.default)(this,"change:hashPath",function(e){e&&e.hashEvent||(a.hash=t.hashPath)},!0)):"history"===e&&(o(this),window.addEventListener("popstate",function(e){e.state&&e.state.validPush&&o(t)}),(0,p.default)(this,"change:path",function(e){e&&e.popEvent||n.pushState({validPush:!0},"",t.path+a.hash)},!0))}return this.initialized=!0,this}},{key:"subscribe",value:function(t,e){var r=this,n=e.replace(/\/\//g,"/").replace(/^\/|\/$/g,"").split("/"),a=[],i=n.filter(function(t){return"*"!==t}),o=[];this.init();for(var s=0;s<i.length;s++){var u=i[s];a.push("change:"+u)}(0,c.default)(t,a,function(e){if(!e||!e.routeSilent){for(var a=[],i=0;i<n.length;i++){var o="*"===n[i]?r.parts[i]:t[n[i]];if(!o)break;a.push(o)}r.parts=a}});for(var h=0;h<n.length;h++)o.push("*"===t[n[h]]?this.parts[h]:t[n[h]]||this.parts[h]);for(var f=0;f<n.length;f++)void 0===t[n[f]]&&this.parts[f]&&"*"!==n[f]&&(0,g.default)(t,n[f],this.parts[f],{routeSilent:!0});return(0,c.default)(this,"pathchange",function(){for(var e=0;e<n.length;e++)"*"!==n[e]&&(0,g.default)(t,n[e],r.parts[e]||null,{routeSilent:!0})}),this.parts=o,this}}]),t}();m.history=new m("history"),m.hash=new m("hash"),t.exports=m},function(t,e,r){"use strict";function n(t,e,r){return i.default[r||"hash"].subscribe(t,e),t}var a=r(0),i=function(t){return t&&t.__esModule?t:{default:t}}(a);"function"==typeof Matreshka&&(Matreshka.Router=i.default,Matreshka.initRouter=n),t.exports=n},function(e,r){e.exports=t},function(t,r){t.exports=e},function(t,e){t.exports=r},function(t,e){t.exports=n},function(t,e){t.exports=a}])}),"function"==typeof define&&define.amd&&(define("matreshka/calc",["matreshka"],function(t){return t.calc}),define("matreshka/on",["matreshka"],function(t){return t.on}),define("matreshka/ondebounce",["matreshka"],function(t){return t.onDebounce}),define("matreshka/trigger",["matreshka"],function(t){return t.trigger}),define("matreshka/set",["matreshka"],function(t){return t.set}));
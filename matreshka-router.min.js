!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t(require("matreshka/calc"),require("matreshka/on"),require("matreshka/ondebounce"),require("matreshka/trigger"),require("matreshka/set"));else if("function"==typeof define&&define.amd)define(["matreshka/calc","matreshka/on","matreshka/ondebounce","matreshka/trigger","matreshka/set"],t);else{var r="object"==typeof exports?t(require("matreshka/calc"),require("matreshka/on"),require("matreshka/ondebounce"),require("matreshka/trigger"),require("matreshka/set")):t(e.Matreshka.calc,e.Matreshka.on,e.Matreshka.onDebounce,e.Matreshka.trigger,e.Matreshka.set);for(var n in r)("object"==typeof exports?exports:e)[n]=r[n]}}(this,function(e,t,r,n,a){return function(e){function t(n){if(r[n])return r[n].exports;var a=r[n]={exports:{},id:n,loaded:!1};return e[n].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e,t,r){return o.default[r||"hash"].subscribe(e,t),e}var i=r(1),o=n(i);"function"==typeof Matreshka&&(Matreshka.Router=o.default,Matreshka.initRouter=a),e.exports=a},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e){(0,g.default)(e,"hashPath",window.location.hash,{hashEvent:!0})}function o(e){(0,g.default)(e,"path",window.location.pathname,{popEvent:!0})}var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),h=r(2),u=n(h),f=r(3),c=n(f),l=r(4),p=n(l),d=r(5),k=n(d),v=r(6),g=n(v),m=function(){function e(t){return a(this,e),this.parts=[],this.path="/",this.hashPath="!#/",t in e?e[t]:(this.type=t,this)}return s(e,[{key:"init",value:function(){var e=this;if(this.initialized)return this;var t=this.type;return(0,u.default)(this,{parts:{source:"path",handler:function(e){var t=e.replace(/\/\//g,"/").replace(/^\/|\/$/g,"");return t?t.split("/"):[]}},path:{source:"parts",handler:function(e){for(var t=[],r=0;r<e.length&&e[r];r++)t.push(e[r]);return t.length?"/"+t.join("/")+"/":"/"}}},{debounceCalc:!1}),(0,u.default)(this,{hashPath:{source:"path",handler:function(e){return e&&"/"!==e?"#!"+e:""}},path:{source:"hashPath",handler:function(e){return e?e.replace(/^#!/,""):""}}},{debounceCalc:!1}),(0,c.default)(this,"change:parts",function(t){var r=t.value,n=t.previousValue,a=r.length===n.length;if(a)for(var i=0;i<r.length;i++)if(r[i]!==n[i]){a=!1;break}a||(0,k.default)(e,"pathchange")}),"undefined"!=typeof window&&!function(){var r=window,n=r.history,a=r.location;"hash"===t?(i(e),window.addEventListener("hashchange",function(){return i(e)}),(0,p.default)(e,"change:hashPath",function(t){t&&t.hashEvent||(a.hash=e.hashPath)},!0)):"history"===t&&(o(e),window.addEventListener("popstate",function(t){t.state&&t.state.validPush&&o(e)}),(0,p.default)(e,"change:path",function(t){t&&t.popEvent||n.pushState({validPush:!0},"",e.path+a.hash)},!0))}(),this.initialized=!0,this}},{key:"subscribe",value:function(e,t){var r=this,n=t.replace(/\/\//g,"/").replace(/^\/|\/$/g,"").split("/"),a=[],i=n.filter(function(e){return"*"!==e}),o=[];this.init();for(var s=0;s<i.length;s++){var h=i[s];a.push("change:"+h)}(0,c.default)(e,a,function(t){if(!t||!t.routeSilent){for(var a=[],i=0;i<n.length;i++){var o="*"===n[i]?r.parts[i]:e[n[i]];if(!o)break;a.push(o)}r.parts=a}});for(var u=0;u<n.length;u++)o.push("*"===e[n[u]]?this.parts[u]:e[n[u]]||this.parts[u]);for(var f=0;f<n.length;f++)"undefined"==typeof e[n[f]]&&this.parts[f]&&"*"!==n[f]&&(0,g.default)(e,n[f],this.parts[f],{routeSilent:!0});return(0,c.default)(this,"pathchange",function(){for(var t=0;t<n.length;t++)"*"!==n[t]&&(0,g.default)(e,n[t],r.parts[t]||null,{routeSilent:!0})}),this.parts=o,this}}]),e}();m.history=new m("history"),m.hash=new m("hash"),e.exports=m},function(t,r){t.exports=e},function(e,r){e.exports=t},function(e,t){e.exports=r},function(e,t){e.exports=n},function(e,t){e.exports=a}])}),"function"==typeof define&&define.amd&&(define("matreshka/calc",["matreshka"],function(e){return e.calc}),define("matreshka/on",["matreshka"],function(e){return e.on}),define("matreshka/ondebounce",["matreshka"],function(e){return e.onDebounce}),define("matreshka/trigger",["matreshka"],function(e){return e.trigger}),define("matreshka/set",["matreshka"],function(e){return e.set}));
//# sourceMappingURL=matreshka-router.min.js.map